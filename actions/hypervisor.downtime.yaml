---
description: Schedule a downtime a Hypervisor in Icinga and AlertManager, mutes all alerts for the hypervisor
enabled: true
entry_point: src/openstack_actions.py
name: hypervisor.downtime
parameters:
  hypervisor_name:
    type: string
    description: Hostname of the hypervisor, e.g. hvxyz.nubes.rl.ac.uk
    required: true
  end_time:
    type: string
    description: "Enter the end date of the downtime period, starting now, as a UTC timestamp in the format YYYY-MM-DD HH:MM. NOTE: if this field is left empty, then field 'duration' is required."
    required: false
  duration:
    type: string
    description: "Enter the duration of the downtime, starting now, as a number of days (d) and/or hours (h) (examples: 2d, 24h, 3d 12h). NOTE: if this field is left empty, then field 'end_time' is required."
    required: false
  comment:
    type: string
    description: Downtime reason
    required: true
  lib_entry_point:
    type: string
    default: workflows.hypervisor_downtime.schedule_hypervisor_downtime
    immutable: true
  icinga_account_name:
    type: string
    description: "Name of Icinga Account to use. Must be configured in in the pack settings."
    required: true
    default: "default"
  alertmanager_account_name:
    type: string
    description: "Name of AlertManager Account to use. Must be configured in in the pack settings."
    required: true
    default: "default"
  set_silence:
    type: boolean
    description: Whether to set silences in alertmanager
    required: true
    default: True
  set_downtime:
    type: boolean
    description: Whether to set downtime in icinga
    required: true
    default: False
runner_type: python-script
